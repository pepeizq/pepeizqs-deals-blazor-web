@page "/cost-web"

@using Microsoft.AspNetCore.Components.Web
@using pepeizqs_deals_blazor_web.Componentes.Interfaz

@inject IHttpContextAccessor Contexto

@{
	string descripcion = Herramientas.Idiomas.BuscarTexto(idioma, "Subtitle", "CostWeb");

	string[] keywordsEnBruto = Herramientas.Buscador.LimpiarNombre(descripcion, false).Split(' ');
	List<string> keywordsLista = new List<string>();
	keywordsLista.AddRange(keywordsEnBruto);

	string keywords = "cost";

	foreach (string keyword in keywordsLista)
	{
		if (keyword.Length > 3 && keywords.Contains(keyword) == false)
		{
			keywords = keywords + ", " + keyword;
		}
	}

	<Titulo tipo="@Titulo.Tipo.Coste" idioma="@idioma" keywords="@keywords" descripcionCoste="@descripcion"/>
}

<style>
	.caja-coste-contenido {
		background-color: var(--fondoSubsubcabecera);
		box-shadow: 0px 4px 8px 0px rgba(0, 0, 0, 0.28),0px 0px 2px 0px rgba(0, 0, 0, 0.24);
	}

	.caja-coste-titulo {
		background: color-mix(in srgb, var(--fondoSubcabecera) 45%, var(--fondoBotonPequeño));
		font-size: 18px;
		padding: 20px 30px;
		border: 1px solid var(--fondoSubsubcabecera);
	}

	.caja-coste-mini {
		background-color: var(--fondoSubcabecera);
		box-shadow: 0px 4px 8px 0px rgba(0, 0, 0, 0.28),0px 0px 2px 0px rgba(0, 0, 0, 0.24);
		padding: 15px;
	}
</style>

<div class="subcabecera">
	<div class="cuerpo-ancho sub-subcabecera">
		<h1 style="font-size: 18px; width: fit-content; margin: 0px; padding: 9px 0px;">
			@Herramientas.Idiomas.BuscarTexto(idioma, "Title", "CostWeb")
		</h1>
	</div>
</div>

<div class="caja-coste-contenido" style="margin: 40px auto;">
	<div class="caja-coste-titulo" style="display: flex; align-items: center; gap: 20px;">
		<div>
			@Herramientas.Idiomas.BuscarTexto(idioma, "String16", "CostWeb")
		</div>

		@if (saldo >= 0)
		{
			<div style="font-size: 16px; padding: 5px 10px; background-color: var(--fondoBien); box-shadow: 0px 4px 8px 0px rgba(0, 0, 0, 0.28),0px 0px 2px 0px rgba(0, 0, 0, 0.24);">
				@saldo.ToString().Replace(".", ",") € EUR
			</div>
		}
		else
		{
			<div style="font-size: 16px; padding: 5px 10px; background-color: var(--fondoPeligro); box-shadow: 0px 4px 8px 0px rgba(0, 0, 0, 0.28),0px 0px 2px 0px rgba(0, 0, 0, 0.24);">
				@saldo.ToString().Replace(".", ",") € EUR
			</div>
		}
	</div>

	<div style="padding: 30px;">
		<div>
			@Herramientas.Idiomas.BuscarTexto(idioma, "String1", "CostWeb")
		</div>

		<div style="margin-top: 30px;">
			@Herramientas.Idiomas.BuscarTexto(idioma, "String14", "CostWeb")
		</div>
	</div>
</div>

<div class="caja-coste-contenido" style="margin: 40px auto;">
	<div class="caja-coste-titulo" style="display: flex; align-items: center; gap: 20px;">
		<div>
			@Herramientas.Idiomas.BuscarTexto(idioma, "String18", "CostWeb")
		</div>
	</div>

	<div style="padding: 30px; display: flex; flex-direction: column; gap: 20px;">
		<div class="caja-coste-mini" style="display: flex; align-items: center; gap: 20px; justify-content: space-between; padding: 10px 15px;">
			<div style="display: flex; align-items: center; gap: 20px;">
				<div style="min-width: 100px; text-align: center;">
					10/3/2025
				</div>

				<div>
					Fanatical Affiliates
				</div>
			</div>

			<div style="padding: 5px 10px; background-color: var(--fondoBien); min-width: 120px; text-align: center; box-shadow: 0px 4px 8px 0px rgba(0, 0, 0, 0.28),0px 0px 2px 0px rgba(0, 0, 0, 0.24);">
				29,91 £ GBP
			</div>
		</div>

		<div class="caja-coste-mini" style="display: flex; align-items: center; gap: 20px; justify-content: space-between; padding: 10px 15px;">
			<div style="display: flex; align-items: center; gap: 20px;">
				<div style="min-width: 100px; text-align: center;">
					17/11/2024
				</div>

				<div>
					SmarterASP SSL + Extra 1 Static IP (1 Year Extra)
				</div>
			</div>

			<div style="padding: 5px 10px; background-color: var(--fondoPeligro); min-width: 120px; text-align: center; box-shadow: 0px 4px 8px 0px rgba(0, 0, 0, 0.28),0px 0px 2px 0px rgba(0, 0, 0, 0.24);">
				53 $ USD
			</div>
		</div>
	</div>
</div>

<div class="caja-coste-contenido" style="margin: 40px auto;">
	<div class="caja-coste-titulo">
		<div>
			@Herramientas.Idiomas.BuscarTexto(idioma, "String17", "CostWeb")
		</div>
	</div>
	
	<div style="padding: 30px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px;">
		<div class="caja-coste-mini">
			<div>
				@Herramientas.Idiomas.BuscarTexto(idioma, "String2", "CostWeb")
			</div>
			<hr />
			<div style="display: flex; flex-direction: column; gap: 20px;">
				<div>
					@Herramientas.Idiomas.BuscarTexto(idioma, "String10", "CostWeb")
				</div>

				<a href="https://www.smarterasp.net/index?r=pepeizq" target="_blank" style="text-decoration: none;">
					<div>
						@(string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String3", "CostWeb"), "30/1/2027"))
					</div>
				</a>
			</div>
		</div>

		<div class="caja-coste-mini">
			<div>
				@Herramientas.Idiomas.BuscarTexto(idioma, "String4", "CostWeb")
			</div>
			<hr />
			<div style="display: flex; flex-direction: column; gap: 20px;">
				<div>
					@Herramientas.Idiomas.BuscarTexto(idioma, "String11", "CostWeb")
				</div>

				<a href="https://clientes.webempresa.com/europa/gestion/aff.php?aff=2609" target="_blank" style="text-decoration: none;">
					<div>
						@string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String5", "CostWeb"), "15/3/2028")
					</div>
				</a>
			</div>
		</div>

		<div class="caja-coste-mini">
			<div>
				@Herramientas.Idiomas.BuscarTexto(idioma, "String6", "CostWeb")
			</div>
			<hr />
			<div style="display: flex; flex-direction: column; gap: 20px;">
				<div>
					@Herramientas.Idiomas.BuscarTexto(idioma, "String12", "CostWeb")
				</div>

				<a href="https://www.smarterasp.net/index?r=pepeizq" target="_blank" style="text-decoration: none;">
					<div>
						@string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String7", "CostWeb"), "6/12/2025")
					</div>
				</a>
			</div>
		</div>

		<div class="caja-coste-mini">
			<div>
				@Herramientas.Idiomas.BuscarTexto(idioma, "String8", "CostWeb")
			</div>
			<hr />
			<div style="display: flex; flex-direction: column; gap: 20px;">
				<div>
					@Herramientas.Idiomas.BuscarTexto(idioma, "String13", "CostWeb")
				</div>

				<a href="https://www.smarterasp.net/index?r=pepeizq" target="_blank" style="text-decoration: none;">
					<div>
						@string.Format(Herramientas.Idiomas.BuscarTexto(idioma, "String9", "CostWeb"), "6/12/2025")
					</div>
				</a>
			</div>
		</div>
	</div>
</div>

<div class="caja-coste-contenido" style="margin: 40px auto;">
	<div class="caja-coste-titulo">
		<div>
			@Herramientas.Idiomas.BuscarTexto(idioma, "String15", "CostWeb")
		</div>
	</div>

	<div style="padding: 30px;">
		<ul>
			<li>
				@Herramientas.Idiomas.BuscarTexto(idioma, "String19", "CostWeb")
			</li>
			<li>
				@Herramientas.Idiomas.BuscarTexto(idioma, "String20", "CostWeb")
			</li>
			<li>
				@Herramientas.Idiomas.BuscarTexto(idioma, "String21", "CostWeb")
			</li>
		</ul>
	</div>
</div>

@code {

	#nullable disable

	public double saldo = -14.49;

	private string idioma = "en";
	private string usuarioId = null;

	protected override void OnInitialized()
	{
		Herramientas.ContextoUsuarioDatos datos = Herramientas.ContextoUsuario.Leer(Contexto);
		idioma = datos.Idioma;
		usuarioId = datos.UsuarioId;

		if (string.IsNullOrEmpty(usuarioId) == false)
		{
			idioma = BaseDatos.Usuarios.Buscar.IdiomaSobreescribir(usuarioId);
		}
	}
}
